<main>
  <nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="https://www.roperlawyers.com/">Roper Lawyers</a>

      <div class="d-flex align-items-center">
        <!-- Call button visible on mobile only -->
        <a href="tel:+34928974241" class="d-lg-none me-2">
          <i class="fas fa-phone-alt text-white"></i>
        </a>
        <!-- Hamburger menu button -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" style="border: none;">
          <span class="navbar-toggler-icon" style="filter: brightness(0) invert(1);"></span>
        </button>
      </div>

      <div class="collapse navbar-collapse" id="navbarNav">
        <!-- Left aligned items -->
        <ul class="navbar-nav me-auto left-links">
          <li class="nav-item mx-2">
            <a class="nav-link text-white text-decoration-none" href="tel:+44 20 8135 8218">
              ðŸ‡¬ðŸ‡§ +44 20 8135 8218
            </a>
          </li>
          <li class="nav-item mx-2">
            <a class="nav-link text-white text-decoration-none" href="tel:+34 928 97 42 41">
              ðŸ‡ªðŸ‡¸ +34 928 97 42 41
            </a>
          </li>
          <li class="nav-item mx-2">
            <%= link_to "Spain Property Selling and Buying Guide", "/spain-property-guide", 
                        class: "nav-link text-white text-decoration-none" %>
          </li>
          <li class="nav-item mx-2">
            <!-- Link now points to /free-consultation -->
            <a class="nav-link text-white text-decoration-none" href="/free-consultation">
              Free consultation
            </a>
          </li>
          <li class="nav-item mx-2">
            <a class="nav-link text-white text-decoration-none" href="#" data-bs-toggle="modal" data-bs-target="#contactModal">
              Contact Our Team
            </a>
          </li>
        </ul>

        <!-- Right aligned items: Buttons for auth-related links -->
        <ul class="navbar-nav ms-auto">
          <% if user_signed_in? %>
            <li class="nav-item">
              <p class="nav-link text-muted mb-0">
                Logged in as <strong><%= current_user.email %></strong>
              </p>
            </li>
            <li class="nav-item">
              <%= link_to 'Dashboard', edit_user_path(current_user), class: "btn btn-outline-secondary m-1" %>
            </li>
            <li class="nav-item">
              <%= link_to "Logout", destroy_user_session_path, class: "btn btn-outline-secondary m-1", method: :delete %>
            </li>
          <% else %>
            <li class="nav-item">
              <%= link_to "Sign up", new_user_registration_path, class: "btn btn-outline-secondary m-1" %>
            </li>
            <li class="nav-item">
              <%= link_to "Login", new_user_session_path, class: "btn btn-outline-secondary m-1" %>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
    <!-- Calendly widget assets -->
    <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
    <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>
  </nav>

  <div class="flash flash-warning alert alert-dismissible fade show" role="alert">
    <!-- Desktop alert text -->
    <span class="d-none d-md-inline">
      This <%= Date.current.strftime("%B") %>, weâ€™re accepting only <%= pick_random_number_based_on_month %> new property law clients to ensure every client receives the expert, personalised service they deserve.
    </span>
    <!-- Mobile alert text -->
    <span class="d-inline d-md-none">
      Accepting <%= pick_random_number_based_on_month %> new clients this <%= Date.current.strftime("%B") %>.
    </span>
    <a data-bs-dismiss="alert" aria-label="Close">
      <i class="fas fa-times"></i>
    </a>
  </div>

  <div class="container py-4">
    <div class="row flex-lg-row-reverse align-items-center g-5">
      <!-- Image Column -->
      <div class="col-md-10 mx-auto col-lg-5">
        <%= image_tag("Olivier-Roper-Solicitor-Roper-Lawyers.jpg", 
            alt: "Olivier Roper", 
            class: "d-none d-sm-block mx-lg-auto img-fluid rounded img-home") %>
      </div>

      <!-- Text Column -->
      <div class="col-lg-6 d-flex align-items-center">
        <div class="w-100">
          <!-- Google Reviews (center on mobile) -->
          <div class="mb-3 text-center text-md-start">
            <a class="reviews-link d-block" href="#reviews">
              <strong>Google Reviews</strong>
              <span class="stars">5.0</span>
              <i class="fa-sharp fa-solid fa-star stars"></i>
              <i class="fa-sharp fa-solid fa-star stars"></i>
              <i class="fa-sharp fa-solid fa-star stars"></i>
              <i class="fa-sharp fa-solid fa-star stars"></i>
              <i class="fa-sharp fa-solid fa-star stars"></i>
            </a>
          </div>

          <!-- Title (center on mobile) -->
          <h1 class="fw-bold lh-1 my-3 text-center text-md-start">
            <!-- Desktop title -->
            <span class="d-none d-md-inline">
              <span class="gradient-text">Expert Property Lawyers in Spain:</span> Conveyancing Solicitors
            </span>
            <!-- Mobile title with custom class -->
            <span class="d-inline d-md-none mobile-title">
              <span class="gradient-text">Expert<br>Property Lawyers <br>in </span>Spain
            </span>
          </h1>

          <!-- Subtitle (center on mobile) -->
          <p class="value-proposition text-center text-md-start">
            <!-- Desktop subtitle -->
            <span class="d-none d-md-inline">
              Providing Clear, Trusted Legal Advice for Stress-Free Property Buying & Selling in Spain â€“ With Over 14 Years of Expertise.
            </span>
            <!-- Mobile subtitle -->
            <span class="d-inline d-md-none">
              Providing Clear, Legal Advice for Stress-Free Buying & Selling Property in Spain.<br>14+ years experience.
            </span>
          </p>

          <!-- Book a Consultation Button (center on mobile) -->
          <div class="d-grid gap-2 mt-3 text-md-start">
            <%= link_to '/free-consultation', class: "btn btn-outline-secondary btn-lg button-super-white rounded-pill justify-content-center" do %>
              <%= image_tag("Olivier-Roper-Solicitor-Roper-Lawyers-head.jpg", 
                  alt: "Olivier Roper", 
                  class: "olivier-head") %>
              <p class="mb-0">Book a Free Consultation<br>with Olivier Roper</p>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>


<!-- Contact Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="contactUsForm">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Contact Us</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="form-floating mb-3">
            <input type="email" class="form-control" id="email" placeholder="name@example.com">
            <label for="floatingInput">Email address</label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" id="submitButton" class="btn btn-primary">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- WhatsApp Button -->
<div>
  <a class="whatsapp-btn" href="https://wa.me/+34649948377" target="_blank">
    <div class="red-dot"></div>
    <i class="fa-brands fa-whatsapp"></i>
  </a>
  <script src="https://kit.fontawesome.com/6640eefe98.js" crossorigin="anonymous"></script>
</div>
